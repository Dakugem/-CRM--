**EBKO-CRM** -- система, позволяющая организовать взаимодействие телекоммуникационной компании и клиентов в B2B сегменте. Система объединяет в себе фукционал модулей:
- **NRI (Network Resource Inventory)**: Учет сетевых ресурсов и оборудования
- **КТП (Комплекс Технической Поддержки)**: Обработка инцидентов и заявок от клиентов
- **WFM (Workforce Management)**: Управление персоналом на линиях (задачи для монтажников/инженеров)

# Техническое задание на разработку системы EBKO-CRM

## 1. Введение
### 1.1 Глоссарий
- **Клиент (Заявитель)** - физическое или юридическое лицо, пользующееся услугами компании
- **Представитель клиента** - контактное лицо, уполномленное создавать обращения от имени клиента
- **Площадка** - физический адрес (объект), где расположено оборудование клиента
- **Продукт** - Услуга или самостоятельный продукт предоставляемый компанией. Может иметь следующие значения:
   - МКД (Мультисервисный коммутатор доступа) - Программный или аппаратный комплекс для организации IP-телефонии в поколеннии NGN
   - Интернет - сумма всех необходимых транков, аппаратных комплексов для предоставления доступа в сеть Интернет
   - IP-телефония - сумма всех необходимых транков, аппаратных комплексов для организации IP-телефонии
-  единица учёта в NRI (коммутатор, кабель, порт и т.п.)
- **Обращение** - обобщённая сущность для заявок КТП и задач WFM. Может быть типа:
   - **Тикет (КТП-обращение)** - обращение,  требующее экспертизы оператора техподдержки
   - **Наряд (WFM-обращение)** - обращение, требующее выезда инженера
- **Подзадача** - дочернее обращение, связанное с родительским
- **Сотрудник** - работник компании (оператор КТП, инженер WFM, администратор)
- **Роль** - набор прав доступа (Админ, Оператор КТП, Инженер WFM, Клиент)
- **Критичность** - показатель важности обращения, влиящий на время реагирования. Имеет следующие типы:
     - **Basic** - базовое обращение невысокого уровня сложности, низкий вес в отображении обращений у сотрудника, дедлайн - 30 дней 
     - **Important** - важное обращение, требует глубокого анализа и/или дополнительных обращений или действий, средний вес в отображении обращений у сотрудника, дедлайн - 15 дней
     - **Critical** - критическое обращение, имеет серьезные последствия для предоставляемой услуги, требует быстрого реагирования, высокий вес в отображении обращений у сотрудника, дедлайн - 1 день
- **Статусы** - показатель выполнения обращения, отражающий его жизненный цикл. Имеет следующие типы:
     - **Created** - Исходное состояние задачи при ее создании
     - **Opened** - Задача открыта. Должен быть назначен менджер
     - **Active** - Задача находиться в работе
     - **Info Request** - Запрошена информация у Заказчика для дальнешей работы по кейсу
     - **Development** - Задача в разработке
     - **Canceled** - Задача отменена или потеряла актуальность. Переход в другие статусы невозможен
     - **Customer Pending** -Ожидание заказчика. Например, составление договоров,настйроки удаленного доступа и тп.
     - **Done** - Работа по кейсу завершена. Ожидаем подверждение заявителя/клиента
     - **Verified** - Задача полностью завершена, подтверждена заказчиком. Переход в другие статусы невозможен

### 1.2 Общие архитектурные решения
- **Backend**: монолит на C++, фреймворк - Dragon
- **Frontend**: React
- **Data Base**: PostgreSQL

### 1.3 Команда проекта
- **CEO**: Кошелев Евгений Борисович 
- **Frontend**: Степаненко Денис, Лёшин Илья, Комаха Глеб, Слюта Андрей, Соромотин Михаил, Слесенко Андрей, Кошмин Андрей
- **Backend**: Тинов Михаил, Коровкин Владислав, Тихиня Илья
- **DevOps and Network engineers**: Плыс Михаил, Карташов Дмитрий, Шальнов Максим, Шакиро Иван
- **Analytics and Technical writers**: Морозов Александр,  Ренёв Михаил, Артёмов Даниил
- **Vibes specialist**: Комаха Глеб

## 2. Роли и права доступа 

| Модуль / Действие                                   | Админ | Оператор КТП      | Инженер WFM      | Клиент           |
|-----------------------------------------------------|:-----:|:-----------------:|:----------------:|:----------------:|
| **Обращения**                                        |       |              |             |        |
| – Просмотр всех обращений                            | ✓     | ✓ (КТП+WFM) | ✓ (WFM) | ✓ (только свои) |
| – Создание обращения                                 | ✓     | ✓ (тип КТП)  | ✓ (тип WFM) | ✓ (оба типа) |
| – Редактирование обращения                           | ✓     | ✓ (КТП + WFM)| ✓ (WFM)     | ✓     |
| – Изменение статуса/критичности                      | ✓     | ✓ (КТП)      | ✓ (WFM)     | ✓ + `Verified`/`Canceled` |
| – Добавление комментариев (в т.ч. с медиа)           | ✓     | ✓            | ✓           | ✓      |
| – Назначение ответственного                          | ✓     | ✓ (КТП)      | ✓ (WFM)     | ✗      |
| – Создание подзадачи                                 | ✓     | ✓ (КТП→КТП/WFM) | ✓ (WFM→WFM) | ✗      |
| – Трекинг времени                                    | ✓     | ✓            | ✓           | ✗      |
| **Сотрудники**                                       |       |               |             |        |
| – Просмотр списка сотрудников                        | ✓     | ✓            | ✓           | ✗      |
| – Добавление/удаление/редактирование сотрудника      | ✓     | ✗            | ✗           | ✗      |
| – Управление ролями                                  | ✓     | ✗            | ✗           | ✗      |
| – Управление отсутствиями/дежурствами                | ✓     | ✓            | ✓           | ✗      |
| **Клиенты**                                          |       |               |             |        |
| – Просмотр клиентов/представителей                   | ✓     | ✓            | ✓           | ✓ (только себя)|
| – Создание/редактирование клиентов/представителей    | ✓     | ✗            | ✗           | ✗      |
| **Площадки и оборудование**                          |       |               |              |        |
| – Просмотр площадок и оборудования                   | ✓     | ✓            | ✓           | ✓ (только свои) |
| – Создание/редактирование площадок                   | ✓     | ✗            | ✗           | ✗      |
| – Создание/редактирование оборудования               | ✓     | ✗            | ✗           | ✗      |
| **Отчёты**                                           |       |              |             |        |
| – Формирование отчёта по времени                     | ✓     | ✓ (свои)     | ✓ (свои)    | ✗      |
| – Скачивание отчёта (Excel)                          | ✓     | ✓            | ✓           | ✗      |
| **Доска задач**                                      | ✓     | ✓            | ✓           | ✗      |
| **Настройки профиля**                                | ✓     | ✓            | ✓           | ✓      |

## 3. Функиональные требования 
### Первая очередь (Ядро системы)
Цель - обеспечить выполнение базового процесса - «регистрация обращения → выполнение → закрытие» и заведение данных о сотрудниках компании, представителях клиента, площадках и единицах оборудования, привязанным к ней. Организовать доступ пользователей к веб-интерфейсу по созданным УЗ и разграничение функционала по ролям 

#### 3.1 Модуль «Обращения»
**Сущность «Обращение»:**
- **id** (уникальный, автоинкремент)
- **type** (КТП или WFM)
- **title** (строка, в зависимости от типа: КТП - CRM-N+1, WFM - Наряд-N+1)
- **description** (описание задачи)
- **comment_id** (комментарий)
- **status** – см. глоссарий
- **priority** – см. глоссарий
- **product_id** (ID продукта по которому задается обращение, используется для индикации проблемы или вопроса)
- **client_id** (ссылка на клиента)
- **site_id** (ссылка на площадку)
- **responsible_id** (ссылка на сотрудника, ответственного за выполнение)
- **created_by** (ссылка на создателя (представителя (**representative_id**) или сотрудника (**responsible_id**)))
- **created_at**, **updated_at** (Время создания и время обновления(коментарий, статус и тп))
- **deadline** (вычисляется автоматически при создании на основе приоритета)

**Функции:**
- Просмотр списка обращений с фильтрацией по статусу, приоритету, типу, компании и сотруднику согласно матрице ролей
- Создание обращения:
  - Для оператора КТП поля:
    - Описание;
    - Статус (default - Created;);
    - Критичность;
    - Продукт;
    - [Клиент; Представитель - не назначается, но виден для всех представителей клиента]; (Обращение может создаваться на имя компании, поэтому клиентом может быть компания, а представителем - сотрудник компании)
    - площадка;
    - тип проставляется автоматически КТП, заголовок в зависимости от типа CRM/Наряд-(N+1; N=0) 
  - Для инженера WFM: аналогично, тип WFM.
  - Для клиента: аналогично полям КТП; Помимо:
    - выбор типа (КТП или WFM)
    - Поля [Клиент; Представитель] заполняются по информации о компании представителя и его данных автоматически.
    - Площадка может быть выбрана, так и не выбрана
    - Сотрудник не назначается;
    - Статус (default - Created)
- Редактирование обращения, изменение полей:
  - Площадка
  - Статус (Для пользователя с ролью - **Оператор WFM/КТП** недоступно изменение статуса обращений созданного пользователем с ролью **Клиент** в **Verified** и **Cancel**, в обращении в рамках компании - возможно, для пользователя с ролью - **Админ**, можно во всех случаях)
  - Критичность
  - Сотрудник
- Добавление текстовых комментариев с MarkDown разметкой с возможностью предосмотра
- Назначение сотрудника (только для обращений, где он ещё не назначен; после назначения изменить отвественного сотрудника может пользователь с ролью - Админ)
- Отображение истории изменений в обращении (Комментарий, назначение сотрудников, измение полей: статус, критичность и тп согласно возможности редактирования)
- Отображение дедлайна тикета согласно критичности
- Создание подзадачи (Будет идти отображение связанных обращений с текущим, главное условие - связать можно уже существующие обращения)

#### 3.2 Модуль «Сотрудники»
**Сущность «Сотрудник»:**
- **human_id** (ссылка на список представителей клиента, уникальный-дефолтный, компания - Рога и копыта)
- **responsible_id** (уникальный или автоинкремент)
- **name** (ФИО)
- **Photo** (Фото)
- **age** (Возраст)
- **position** (Должность)
- **responsible_tel** (Контактный номер телефона)
- **responsible_email** (Почтовый адрес)
- **role_id** (Роль)
- **login_id** (Логин для доступа к CRM)
- **password_id** (Пароль для доступа к CRM)
**Функции**
- Просмотр списка сотрудников и их данных:
  - Для пользователя с ролью - Оператор WFM/КТП:
     - Фото
     - ФИО
     - Возраст
     - Должность
     - Контактные номер телефона
     - Почтовый адрес
  - Для пользователя с ролью - Админ:
     - Аналогично данным Операторов
     - Роль
     - Логин для доступа к CRM
     - Пароль для доступа к CRM
- Создание, удаление, редактирование сотрудников по поля:
   - Для пользователя с ролью - Оператор WFM/КТП:
      - Фото
      - ФИО
      - Возраст
      - Должность
      - Контактный номер телефона
      - Почтовый адрес
      - Роль
      - Логин для доступа к CRM
      - Пароль для доступа к CRM (Если пусто - автоматически 10 символов)

#### 3.3 Модуль «Клиенты»
**Сущность «Клиент»:**
- **client_id** (уникальный или автоинкремент)
- **client_name** (Имя клиента - название компании или имя физ.лица)
- **client_adress** (адресс компании или физ.лица)
- **client_tel** (контактный номер телефона клиента)
- **client_email** (Почтовый адрес)
- **human_id** (Список представителей клиента)
- **responsible_id** (В случае если client_id - default (Рога и копыта))

**Сущность «Представитель клиента»:**
- **human_id** (уникальный или автоинкремент, ссылка на список представителей клиента)
- **representative_id** (уникальный или автоинкремент)
- **name** (ФИО)
- **responsible_tel** (Контактный номер телефона)
- **responsible_email** (Почтовый адрес)
- **role_id** (Роль)
- **login_id** (уникальный, логин для доступа к CRM)
- **password_id** (Пароль для доступа к CRM)

**Функции**
- Просмотр списка клиентов:
  - Для пользователей с ролью Оператор WFM/КТП: название компании или ФИО физ-лица, контактные данные, список представилей и их данные - ФИО, контактные данные
  - Для пользователей с ролью Админ: все тоже самое, что и у операторов, но также ему видны логин и пароль представителя 
- Возможность создать, редактировать клиента (только администратор) по следующим полям:
   - Название компании или ФИО физ-лица
   - Контактный номер телефона клиента
   - Почтовый адрес клиента
- Возможность создать, редактировать представителей клиента по следующим полям:
   - ФИО
   - Контактные номер телефона
   - Почтовый адрес
   - Логин для доступа к CRM
   - Пароль для доступа к CRM (Если пусто - автоматически, 10 символов)
- Возможность удалять клиентов и представителей

#### 3.3 Модуль «Площадки и оборудование»
**Сущность «Площадка»:**
- **site_id** (уникальный или автоинкремент)
- **site_adress** (адрес площадки)
- **client_id** (ссылка на Имя клиента - название компании или имя физ.лица)
- **client_tel** (ссылка контактный номер телефона клиента)
- **client_email** (ссылка на Почтовый адрес)


3.4. Модуль «Площадки и оборудование»
Просмотр площадок клиента (название, адрес).

Просмотр оборудования, привязанного к площадке (название, тип, серийный номер).

В MVP данные заполняются только администратором; операторы и инженеры могут только просматривать.


  
   
